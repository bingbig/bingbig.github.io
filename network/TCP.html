<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TCP 协议 | Bing</title>
    <meta name="description" content="文档空间">
    <link rel="icon" href="https://avatars.githubusercontent.com/bingbig">
    
    <link rel="preload" href="/assets/css/0.styles.16105da8.css" as="style"><link rel="preload" href="/assets/js/app.7176b739.js" as="script"><link rel="preload" href="/assets/js/3.9c25940f.js" as="script"><link rel="prefetch" href="/assets/js/10.837b488c.js"><link rel="prefetch" href="/assets/js/100.ed3019fa.js"><link rel="prefetch" href="/assets/js/101.4cce5781.js"><link rel="prefetch" href="/assets/js/102.e6c4032b.js"><link rel="prefetch" href="/assets/js/103.468b3045.js"><link rel="prefetch" href="/assets/js/104.8d534601.js"><link rel="prefetch" href="/assets/js/105.2e73726e.js"><link rel="prefetch" href="/assets/js/106.ab20f348.js"><link rel="prefetch" href="/assets/js/107.a24473e3.js"><link rel="prefetch" href="/assets/js/108.f0646629.js"><link rel="prefetch" href="/assets/js/109.90d48ef7.js"><link rel="prefetch" href="/assets/js/11.be709720.js"><link rel="prefetch" href="/assets/js/110.aa6c93bd.js"><link rel="prefetch" href="/assets/js/111.092952e8.js"><link rel="prefetch" href="/assets/js/112.6bf1b2c0.js"><link rel="prefetch" href="/assets/js/113.9c62219a.js"><link rel="prefetch" href="/assets/js/114.79f7f36b.js"><link rel="prefetch" href="/assets/js/115.54f98d94.js"><link rel="prefetch" href="/assets/js/116.aab79f49.js"><link rel="prefetch" href="/assets/js/117.fe9fd0e6.js"><link rel="prefetch" href="/assets/js/118.410eee1a.js"><link rel="prefetch" href="/assets/js/119.8b94d414.js"><link rel="prefetch" href="/assets/js/12.2f7f1056.js"><link rel="prefetch" href="/assets/js/120.62cb9620.js"><link rel="prefetch" href="/assets/js/121.f4ab011b.js"><link rel="prefetch" href="/assets/js/122.ec553b6a.js"><link rel="prefetch" href="/assets/js/123.f02b2ae4.js"><link rel="prefetch" href="/assets/js/124.9c51f716.js"><link rel="prefetch" href="/assets/js/125.b54d1d56.js"><link rel="prefetch" href="/assets/js/126.50147669.js"><link rel="prefetch" href="/assets/js/127.61d3a2f4.js"><link rel="prefetch" href="/assets/js/128.2f747591.js"><link rel="prefetch" href="/assets/js/129.7a31ddb0.js"><link rel="prefetch" href="/assets/js/13.defd66ad.js"><link rel="prefetch" href="/assets/js/130.956408f2.js"><link rel="prefetch" href="/assets/js/131.dabd1665.js"><link rel="prefetch" href="/assets/js/132.aa88a163.js"><link rel="prefetch" href="/assets/js/133.babd908e.js"><link rel="prefetch" href="/assets/js/134.47959427.js"><link rel="prefetch" href="/assets/js/135.7c57d715.js"><link rel="prefetch" href="/assets/js/136.daafcc89.js"><link rel="prefetch" href="/assets/js/137.f4962a56.js"><link rel="prefetch" href="/assets/js/138.8257b145.js"><link rel="prefetch" href="/assets/js/139.06450aba.js"><link rel="prefetch" href="/assets/js/14.39d6fcfd.js"><link rel="prefetch" href="/assets/js/140.347c8cc5.js"><link rel="prefetch" href="/assets/js/141.f3d05de8.js"><link rel="prefetch" href="/assets/js/142.7a6b2bb9.js"><link rel="prefetch" href="/assets/js/143.0dc40c58.js"><link rel="prefetch" href="/assets/js/144.fbf895db.js"><link rel="prefetch" href="/assets/js/145.dec8a9ae.js"><link rel="prefetch" href="/assets/js/146.d5858dce.js"><link rel="prefetch" href="/assets/js/147.efeb70f1.js"><link rel="prefetch" href="/assets/js/148.ff8cad32.js"><link rel="prefetch" href="/assets/js/149.c8813732.js"><link rel="prefetch" href="/assets/js/15.a948696f.js"><link rel="prefetch" href="/assets/js/150.64bbe933.js"><link rel="prefetch" href="/assets/js/151.6435c031.js"><link rel="prefetch" href="/assets/js/152.5fb245e2.js"><link rel="prefetch" href="/assets/js/153.aab737b5.js"><link rel="prefetch" href="/assets/js/154.55fb717e.js"><link rel="prefetch" href="/assets/js/155.8d04b986.js"><link rel="prefetch" href="/assets/js/156.464a8b59.js"><link rel="prefetch" href="/assets/js/157.7d2fc633.js"><link rel="prefetch" href="/assets/js/158.8b643630.js"><link rel="prefetch" href="/assets/js/159.3ce8305e.js"><link rel="prefetch" href="/assets/js/16.5a5c5ed9.js"><link rel="prefetch" href="/assets/js/160.af2aa1a5.js"><link rel="prefetch" href="/assets/js/161.050a3b3c.js"><link rel="prefetch" href="/assets/js/162.5d88a43c.js"><link rel="prefetch" href="/assets/js/163.ff34a390.js"><link rel="prefetch" href="/assets/js/164.8fb414e3.js"><link rel="prefetch" href="/assets/js/165.fe82000e.js"><link rel="prefetch" href="/assets/js/166.f623364c.js"><link rel="prefetch" href="/assets/js/167.ce0d6195.js"><link rel="prefetch" href="/assets/js/168.b89b35c5.js"><link rel="prefetch" href="/assets/js/169.1cc3eda1.js"><link rel="prefetch" href="/assets/js/17.fb0a8623.js"><link rel="prefetch" href="/assets/js/170.1ed4d3de.js"><link rel="prefetch" href="/assets/js/171.45b64180.js"><link rel="prefetch" href="/assets/js/172.0c0ce452.js"><link rel="prefetch" href="/assets/js/173.5a82659f.js"><link rel="prefetch" href="/assets/js/174.0c66f576.js"><link rel="prefetch" href="/assets/js/175.297f67d9.js"><link rel="prefetch" href="/assets/js/176.c14fe812.js"><link rel="prefetch" href="/assets/js/177.d12fb887.js"><link rel="prefetch" href="/assets/js/178.874b3217.js"><link rel="prefetch" href="/assets/js/179.0db131d5.js"><link rel="prefetch" href="/assets/js/18.ec8dbdc2.js"><link rel="prefetch" href="/assets/js/180.9f2d5dc3.js"><link rel="prefetch" href="/assets/js/181.9c1c5f3c.js"><link rel="prefetch" href="/assets/js/182.d4be74f1.js"><link rel="prefetch" href="/assets/js/183.cb6fb43e.js"><link rel="prefetch" href="/assets/js/184.af6c4d89.js"><link rel="prefetch" href="/assets/js/185.ddffc64f.js"><link rel="prefetch" href="/assets/js/186.10117840.js"><link rel="prefetch" href="/assets/js/187.f1ae13c3.js"><link rel="prefetch" href="/assets/js/188.ddb2b726.js"><link rel="prefetch" href="/assets/js/189.efab3b91.js"><link rel="prefetch" href="/assets/js/19.162bc765.js"><link rel="prefetch" href="/assets/js/190.6c9b1181.js"><link rel="prefetch" href="/assets/js/191.75a23eaf.js"><link rel="prefetch" href="/assets/js/192.dda1c4bf.js"><link rel="prefetch" href="/assets/js/193.509fbf9e.js"><link rel="prefetch" href="/assets/js/194.84cea955.js"><link rel="prefetch" href="/assets/js/195.4a8de134.js"><link rel="prefetch" href="/assets/js/196.0d1730c9.js"><link rel="prefetch" href="/assets/js/197.70143000.js"><link rel="prefetch" href="/assets/js/198.846bc07a.js"><link rel="prefetch" href="/assets/js/199.f6255cad.js"><link rel="prefetch" href="/assets/js/2.fc997812.js"><link rel="prefetch" href="/assets/js/20.d04aea00.js"><link rel="prefetch" href="/assets/js/200.963f9de4.js"><link rel="prefetch" href="/assets/js/201.27c2d802.js"><link rel="prefetch" href="/assets/js/202.f6b751c2.js"><link rel="prefetch" href="/assets/js/203.7f7d0315.js"><link rel="prefetch" href="/assets/js/204.6be7fee8.js"><link rel="prefetch" href="/assets/js/205.95971e52.js"><link rel="prefetch" href="/assets/js/206.07fdd631.js"><link rel="prefetch" href="/assets/js/207.12682745.js"><link rel="prefetch" href="/assets/js/208.ff95c7d2.js"><link rel="prefetch" href="/assets/js/209.789d91cd.js"><link rel="prefetch" href="/assets/js/21.0cb83e95.js"><link rel="prefetch" href="/assets/js/210.7175fe11.js"><link rel="prefetch" href="/assets/js/211.1165c794.js"><link rel="prefetch" href="/assets/js/212.221f499f.js"><link rel="prefetch" href="/assets/js/213.2870f96d.js"><link rel="prefetch" href="/assets/js/214.51322d26.js"><link rel="prefetch" href="/assets/js/215.f3b70a6c.js"><link rel="prefetch" href="/assets/js/216.bf213130.js"><link rel="prefetch" href="/assets/js/217.db40de02.js"><link rel="prefetch" href="/assets/js/218.80ffed9c.js"><link rel="prefetch" href="/assets/js/219.7488fedf.js"><link rel="prefetch" href="/assets/js/22.9b59b7df.js"><link rel="prefetch" href="/assets/js/220.126c81f3.js"><link rel="prefetch" href="/assets/js/221.f50c6b79.js"><link rel="prefetch" href="/assets/js/222.ce3028f3.js"><link rel="prefetch" href="/assets/js/223.a2df17c7.js"><link rel="prefetch" href="/assets/js/224.a08bd812.js"><link rel="prefetch" href="/assets/js/225.d9a724c8.js"><link rel="prefetch" href="/assets/js/226.0517c87d.js"><link rel="prefetch" href="/assets/js/227.c4b3130c.js"><link rel="prefetch" href="/assets/js/228.2594dcec.js"><link rel="prefetch" href="/assets/js/229.af2ff4f3.js"><link rel="prefetch" href="/assets/js/23.ce477d38.js"><link rel="prefetch" href="/assets/js/230.cfef10b7.js"><link rel="prefetch" href="/assets/js/231.099fa3f4.js"><link rel="prefetch" href="/assets/js/232.b798c8ba.js"><link rel="prefetch" href="/assets/js/233.a7d2684b.js"><link rel="prefetch" href="/assets/js/234.90df19ca.js"><link rel="prefetch" href="/assets/js/235.6073a67d.js"><link rel="prefetch" href="/assets/js/236.17cd33a2.js"><link rel="prefetch" href="/assets/js/237.c509df55.js"><link rel="prefetch" href="/assets/js/238.564b22a1.js"><link rel="prefetch" href="/assets/js/239.8c166540.js"><link rel="prefetch" href="/assets/js/24.5a5f8261.js"><link rel="prefetch" href="/assets/js/240.5392f950.js"><link rel="prefetch" href="/assets/js/25.bcb6edd5.js"><link rel="prefetch" href="/assets/js/26.3aa94d94.js"><link rel="prefetch" href="/assets/js/27.d9e19d36.js"><link rel="prefetch" href="/assets/js/28.c8e5ec29.js"><link rel="prefetch" href="/assets/js/29.97ecc4ae.js"><link rel="prefetch" href="/assets/js/30.ce2f9053.js"><link rel="prefetch" href="/assets/js/31.17c368a3.js"><link rel="prefetch" href="/assets/js/32.e95a8022.js"><link rel="prefetch" href="/assets/js/33.36903a82.js"><link rel="prefetch" href="/assets/js/34.6c6f9921.js"><link rel="prefetch" href="/assets/js/35.1deead96.js"><link rel="prefetch" href="/assets/js/36.d88f7134.js"><link rel="prefetch" href="/assets/js/37.e7c746a9.js"><link rel="prefetch" href="/assets/js/38.d039d072.js"><link rel="prefetch" href="/assets/js/39.653ca8e7.js"><link rel="prefetch" href="/assets/js/4.b8208adc.js"><link rel="prefetch" href="/assets/js/40.531eeb87.js"><link rel="prefetch" href="/assets/js/41.e9e070bc.js"><link rel="prefetch" href="/assets/js/42.4f786ab5.js"><link rel="prefetch" href="/assets/js/43.55600803.js"><link rel="prefetch" href="/assets/js/44.cad1e082.js"><link rel="prefetch" href="/assets/js/45.7ba9233b.js"><link rel="prefetch" href="/assets/js/46.ca3f6667.js"><link rel="prefetch" href="/assets/js/47.e99ae5a3.js"><link rel="prefetch" href="/assets/js/48.30ede66b.js"><link rel="prefetch" href="/assets/js/49.0357be81.js"><link rel="prefetch" href="/assets/js/5.49a76c4e.js"><link rel="prefetch" href="/assets/js/50.5788bdfd.js"><link rel="prefetch" href="/assets/js/51.1374bafa.js"><link rel="prefetch" href="/assets/js/52.d383075b.js"><link rel="prefetch" href="/assets/js/53.0f284172.js"><link rel="prefetch" href="/assets/js/54.32b92586.js"><link rel="prefetch" href="/assets/js/55.8aa41e0a.js"><link rel="prefetch" href="/assets/js/56.914e6e7e.js"><link rel="prefetch" href="/assets/js/57.a6e830b0.js"><link rel="prefetch" href="/assets/js/58.76926cd0.js"><link rel="prefetch" href="/assets/js/59.e0c4dfc6.js"><link rel="prefetch" href="/assets/js/6.d52816f4.js"><link rel="prefetch" href="/assets/js/60.33c19286.js"><link rel="prefetch" href="/assets/js/61.f9ca94b9.js"><link rel="prefetch" href="/assets/js/62.95f29cd4.js"><link rel="prefetch" href="/assets/js/63.e343225c.js"><link rel="prefetch" href="/assets/js/64.ff820f35.js"><link rel="prefetch" href="/assets/js/65.51e9d85c.js"><link rel="prefetch" href="/assets/js/66.5737e21a.js"><link rel="prefetch" href="/assets/js/67.e9f5b207.js"><link rel="prefetch" href="/assets/js/68.07b80f79.js"><link rel="prefetch" href="/assets/js/69.2bd5e705.js"><link rel="prefetch" href="/assets/js/7.3063b42d.js"><link rel="prefetch" href="/assets/js/70.7c17fb33.js"><link rel="prefetch" href="/assets/js/71.89d52ad2.js"><link rel="prefetch" href="/assets/js/72.f705bc7b.js"><link rel="prefetch" href="/assets/js/73.3942d689.js"><link rel="prefetch" href="/assets/js/74.60ed1ec6.js"><link rel="prefetch" href="/assets/js/75.960d90bf.js"><link rel="prefetch" href="/assets/js/76.086ac3f9.js"><link rel="prefetch" href="/assets/js/77.f4e9c9ec.js"><link rel="prefetch" href="/assets/js/78.8f7a5bb2.js"><link rel="prefetch" href="/assets/js/79.6d64477a.js"><link rel="prefetch" href="/assets/js/8.cac4dc08.js"><link rel="prefetch" href="/assets/js/80.bfa3db3f.js"><link rel="prefetch" href="/assets/js/81.d00c1b91.js"><link rel="prefetch" href="/assets/js/82.55cf5ce1.js"><link rel="prefetch" href="/assets/js/83.cd21ff05.js"><link rel="prefetch" href="/assets/js/84.99cd412c.js"><link rel="prefetch" href="/assets/js/85.34a918a4.js"><link rel="prefetch" href="/assets/js/86.99d94992.js"><link rel="prefetch" href="/assets/js/87.968aef60.js"><link rel="prefetch" href="/assets/js/88.fb1f593e.js"><link rel="prefetch" href="/assets/js/89.5a3de2b2.js"><link rel="prefetch" href="/assets/js/9.de87a797.js"><link rel="prefetch" href="/assets/js/90.ad21685e.js"><link rel="prefetch" href="/assets/js/91.03594ea0.js"><link rel="prefetch" href="/assets/js/92.047b4c1a.js"><link rel="prefetch" href="/assets/js/93.9db94ded.js"><link rel="prefetch" href="/assets/js/94.01f8e062.js"><link rel="prefetch" href="/assets/js/95.02fbce13.js"><link rel="prefetch" href="/assets/js/96.dab24bb8.js"><link rel="prefetch" href="/assets/js/97.886b51d3.js"><link rel="prefetch" href="/assets/js/98.f942f4ea.js"><link rel="prefetch" href="/assets/js/99.07d9a5b5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.16105da8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Bing</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">归档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/clang/content.html" class="nav-link">C</a></li><li class="dropdown-item"><!----> <a href="/PHP/content.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/GO/content.html" class="nav-link">GO</a></li><li class="dropdown-item"><!----> <a href="/network/content.html" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/OS/content.html" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/datastructure/content.html" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/algorithms/content.html" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/Database/content.html" class="nav-link">数据库</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">专栏</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/topics/redis/content.html" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/topics/container/content.html" class="nav-link">Linux 容器</a></li><li class="dropdown-item"><!----> <a href="/topics/centent.html" class="nav-link">更多...</a></li></ul></div></div><div class="nav-item"><a href="/gossip/content.html" class="nav-link">杂谈</a></div><div class="nav-item"><a href="/aboutme.html" class="nav-link">关于</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">归档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/clang/content.html" class="nav-link">C</a></li><li class="dropdown-item"><!----> <a href="/PHP/content.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/GO/content.html" class="nav-link">GO</a></li><li class="dropdown-item"><!----> <a href="/network/content.html" class="nav-link">网络</a></li><li class="dropdown-item"><!----> <a href="/OS/content.html" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/datastructure/content.html" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/algorithms/content.html" class="nav-link">算法</a></li><li class="dropdown-item"><!----> <a href="/Database/content.html" class="nav-link">数据库</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">专栏</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/topics/redis/content.html" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/topics/container/content.html" class="nav-link">Linux 容器</a></li><li class="dropdown-item"><!----> <a href="/topics/centent.html" class="nav-link">更多...</a></li></ul></div></div><div class="nav-item"><a href="/gossip/content.html" class="nav-link">杂谈</a></div><div class="nav-item"><a href="/aboutme.html" class="nav-link">关于</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/network/content.html" class="sidebar-link">计算机网络</a></li><li><a href="/network/physical.html" class="sidebar-link">物理层</a></li><li><a href="/network/DataLink.html" class="sidebar-link">链路层</a></li><li><a href="/network/network.html" class="sidebar-link">网络层</a></li><li><a href="/network/transport.html" class="sidebar-link">传输层</a></li><li><a href="/network/TCP.html" class="active sidebar-link">TCP 协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/network/TCP.html#_1-tcp-协议的作用" class="sidebar-link">1. TCP 协议的作用</a></li><li class="sidebar-sub-header"><a href="/network/TCP.html#_2-tcp-数据包的大小" class="sidebar-link">2. TCP 数据包的大小</a></li><li class="sidebar-sub-header"><a href="/network/TCP.html#_3-tcp-数据包的编号（seq）" class="sidebar-link">3. TCP 数据包的编号（SEQ）</a></li><li class="sidebar-sub-header"><a href="/network/TCP.html#_4-tcp-数据包的组装" class="sidebar-link">4. TCP 数据包的组装</a></li><li class="sidebar-sub-header"><a href="/network/TCP.html#_5-慢启动和-ack" class="sidebar-link">5. 慢启动和 ACK</a></li><li class="sidebar-sub-header"><a href="/network/TCP.html#_6-数据包的遗失处理" class="sidebar-link">6. 数据包的遗失处理</a></li><li class="sidebar-sub-header"><a href="/network/TCP.html#_7-参考链接" class="sidebar-link">7. 参考链接</a></li></ul></li><li><a href="/network/DNS.html" class="sidebar-link">DNS 原理入门</a></li><li><a href="/network/OSI.html" class="sidebar-link">OSI七层模型</a></li><li><a href="/network/protocals.html" class="sidebar-link">协议</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="tcp-协议"><a href="#tcp-协议" aria-hidden="true" class="header-anchor">#</a> TCP 协议</h1> <p>[source: http://www.ruanyifeng.com/blog/2017/06/tcp-protocol.html ]</p> <p>TCP 是互联网核心协议之一，本文介绍它的基础知识。</p> <h2 id="_1-tcp-协议的作用"><a href="#_1-tcp-协议的作用" aria-hidden="true" class="header-anchor">#</a> 1. TCP 协议的作用</h2> <p>互联网由一整套协议构成。TCP 只是其中的一层，有着自己的分工。</p> <p><img src="data:image/png;base64,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" alt="TCP"></p> <p>（图片说明：TCP 是以太网协议和 IP 协议的上层协议，也是应用层协议的下层协议。）</p> <p>最底层的<code>以太网协议（Ethernet）</code>规定了电子信号如何组成<code>数据包（packet）</code>，解决了子网内部的点对点通信。</p> <p><img src="/assets/img/tcp_2.846b07cb.jpg" alt="以太网"></p> <p>（图片说明：以太网协议解决了局域网的点对点通信。）</p> <p>但是，以太网协议不能解决多个局域网如何互通，这由 IP 协议解决。</p> <p><img src="/assets/img/tcp_3.55555d2d.png" alt="IP协议"></p> <p>（图片说明：IP 协议可以连接多个局域网。）</p> <p>IP 协议定义了一套自己的地址规则，称为 IP 地址。它实现了路由功能，允许某个局域网的 A 主机，向另一个局域网的 B 主机发送消息。</p> <p>路由的原理很简单。市场上所有的路由器，背后都有很多网口，要接入多根网线。路由器内部有一张<code>路由表</code>，规定了 A 段 IP 地址走出口一，B 段地址走出口二，...... 通过这套&quot;指路牌&quot;，实现了数据包的转发。</p> <p>IP 协议只是一个地址协议，并不保证数据包的完整。如果路由器丢包（比如缓存满了，新进来的数据包就会丢失），就需要发现丢了哪一个包，以及如何重新发送这个包。这就要依靠 TCP 协议。</p> <p>简单说，<strong>TCP 协议的作用是，保证数据通信的完整性和可靠性，防止丢包。</strong></p> <h2 id="_2-tcp-数据包的大小"><a href="#_2-tcp-数据包的大小" aria-hidden="true" class="header-anchor">#</a> 2. TCP 数据包的大小</h2> <p>以太网数据包（packet）的大小是固定的，最初是1518字节，后来增加到1522字节。其中， 1500 字节是负载（payload），22字节是头信息（head）。</p> <p>IP 数据包在以太网数据包的负载里面，它也有自己的头信息，最少需要20字节，所以 IP 数据包的负载最多为1480字节。</p> <p><img src="/assets/img/tcp_4.63955c84.png" alt="数据包"></p> <p>（图片说明：IP 数据包在以太网数据包里面，TCP 数据包在 IP 数据包里面。）</p> <p>TCP 数据包在 IP 数据包的负载里面。它的头信息最少也需要20字节，因此 TCP 数据包的最大负载是 1480 - 20 = 1460 字节。由于 IP 和 TCP 协议往往有额外的头信息，所以 TCP 负载实际为1400字节左右。</p> <p>因此，一条1500字节的信息需要两个 TCP 数据包。<strong><code>HTTP/2 协议</code>的一大改进， 就是压缩 HTTP 协议的头信息，使得一个 HTTP 请求可以放在一个 TCP 数据包里面，而不是分成多个，这样就提高了速度。</strong></p> <p><img src="data:image/png;base64,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" alt="数据包的大小">
（图片说明：以太网数据包的负载是1500字节，TCP 数据包的负载在1400字节左右。）</p> <h2 id="_3-tcp-数据包的编号（seq）"><a href="#_3-tcp-数据包的编号（seq）" aria-hidden="true" class="header-anchor">#</a> 3. TCP 数据包的编号（SEQ）</h2> <p>一个包1400字节，那么一次性发送大量数据，就必须分成多个包。比如，一个 10MB 的文件，需要发送7100多个包。</p> <p>发送的时候，TCP 协议为每个包编号（<code>sequence number</code>，简称 <code>SEQ</code>），以便接收的一方按照顺序还原。万一发生丢包，也可以知道丢失的是哪一个包。</p> <p><strong>第一个包的编号是一个随机数</strong>。为了便于理解，这里就把它称为1号包。假定这个包的负载长度是100字节，那么可以推算出下一个包的编号应该是101。这就是说，每个数据包都可以得到两个编号：自身的编号，以及下一个包的编号。接收方由此知道，应该按照什么顺序将它们还原成原始文件。</p> <p><img src="/assets/img/tcp_6.3f891c15.png" alt="TCP包的编号"></p> <p>（图片说明：当前包的编号是45943，下一个数据包的编号是46183，由此可知，这个包的负载是240字节。）</p> <h2 id="_4-tcp-数据包的组装"><a href="#_4-tcp-数据包的组装" aria-hidden="true" class="header-anchor">#</a> 4. TCP 数据包的组装</h2> <p>收到 TCP 数据包以后，组装还原是操作系统完成的。应用程序不会直接处理 TCP 数据包。</p> <p>对于应用程序来说，不用关心数据通信的细节。除非线路异常，收到的总是完整的数据。应用程序需要的数据放在 TCP 数据包里面，有自己的格式（比如 HTTP 协议）。</p> <p>TCP 并没有提供任何机制，表示原始文件的大小，这由应用层的协议来规定。比如，HTTP 协议就有一个头信息<code>Content-Length</code>，表示信息体的大小。对于操作系统来说，就是持续地接收 TCP 数据包，将它们按照顺序组装好，一个包都不少。</p> <p>操作系统不会去处理 TCP 数据包里面的数据。一旦组装好 TCP 数据包，就把它们转交给应用程序。==TCP 数据包里面有一个<code>端口（port）</code>参数，就是用来指定转交给监听该端口的应用程序==。</p> <p>应用程序收到组装好的原始数据，以浏览器为例，就会根据 HTTP 协议的<code>Content-Length</code>字段正确读出一段段的数据。这也意味着，<strong>一次 TCP 通信可以包括多个 HTTP 通信</strong>。</p> <h2 id="_5-慢启动和-ack"><a href="#_5-慢启动和-ack" aria-hidden="true" class="header-anchor">#</a> 5. 慢启动和 ACK</h2> <p>服务器发送数据包，当然越快越好，最好一次性全发出去。但是，发得太快，就有可能丢包。<code>带宽小</code>、<code>路由器过热</code>、<code>缓存溢出</code>等许多因素都会导致丢包。线路不好的话，发得越快，丢得越多。</p> <p>最理想的状态是，在线路允许的情况下，达到最高速率。但是我们怎么知道，对方线路的理想速率是多少呢？答案就是慢慢试。</p> <p><strong>TCP 协议为了做到效率与可靠性的统一，设计了一个<code>慢启动（slow start）</code>机制</strong>。开始的时候，发送得较慢，然后根据丢包的情况，调整速率：如果不丢包，就加快发送速度；如果丢包，就降低发送速度。</p> <p>Linux 内核里面设定了（<code>常量TCP_INIT_CWND</code>），刚开始通信的时候，发送方一次性发送10个数据包，即<code>&quot;发送窗口&quot;</code>的大小为10。然后停下来，等待接收方的确认，再继续发送。</p> <p>默认情况下，接收方每收到两个 TCP 数据包，就要发送一个确认消息。&quot;确认&quot;的英语是<code>acknowledgement</code>，所以这个确认消息就简称 <code>ACK</code>。</p> <p>ACK 携带两个信息。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1. 期待要收到下一个数据包的编号
2. 接收方的接收窗口的剩余容量
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>发送方有了这两个信息，再加上自己已经发出的数据包的最新编号，就会推测出接收方大概的接收速度，从而降低或增加发送速率。这被称为<code>&quot;发送窗口&quot;</code>，这个窗口的大小是可变的。</p> <p><img src="/assets/img/tcp_7.779fa881.png" alt="发送窗口"></p> <p>（图片说明：每个 ACK 都带有下一个数据包的编号，以及接收窗口的剩余容量。双方都会发送 ACK。）</p> <p>注意，由于 TCP 通信是双向的，所以双方都需要发送 ACK。两方的窗口大小，很可能是不一样的。而且 <strong>ACK 只是很简单的几个字段，通常与数据合并在一个数据包里面发送</strong>。</p> <p><img src="/assets/img/tcp_8.d906d486.jpg" alt="通讯"></p> <p>（图片说明：上图一共4次通信。第一次通信，A 主机发给B 主机的数据包编号是1，长度是100字节，因此第二次通信 B 主机的 ACK 编号是 1 + 100 = 101，第三次通信 A 主机的数据包编号也是 101。同理，第二次通信 B 主机发给 A 主机的数据包编号是1，长度是200字节，因此第三次通信 A 主机的 ACK 是201，第四次通信 B 主机的数据包编号也是201。）</p> <p>即使对于带宽很大、线路很好的连接，TCP 也总是从10个数据包开始慢慢试，过了一段时间以后，才达到最高的传输速率。这就是 TCP 的慢启动。</p> <h2 id="_6-数据包的遗失处理"><a href="#_6-数据包的遗失处理" aria-hidden="true" class="header-anchor">#</a> 6. 数据包的遗失处理</h2> <p>TCP 协议可以保证数据通信的完整性，这是怎么做到的？</p> <p>前面说过，每一个数据包都带有下一个数据包的编号。如果下一个数据包没有收到，那么 ACK 的编号就不会发生变化。</p> <p>举例来说，现在收到了4号包，但是没有收到5号包。ACK 就会记录，期待收到5号包。过了一段时间，5号包收到了，那么下一轮 ACK 会更新编号。如果5号包还是没收到，但是收到了6号包或7号包，那么 ACK 里面的编号不会变化，总是显示5号包。这会导致大量重复内容的 ACK。</p> <p>如果发送方发现收到<u>三个连续的重复 ACK，或者超时了还没有收到任何 ACK</u>，就会确认丢包，即5号包遗失了，从而再次发送这个包。通过这种机制，TCP 保证了不会有数据包丢失。</p> <p><img src="/assets/img/tcp_9.937df514.png" alt="丢失包处理">
（图片说明：Host B 没有收到100号数据包，会连续发出相同的 ACK，触发 Host A 重发100号数据包。）</p> <h2 id="_7-参考链接"><a href="#_7-参考链接" aria-hidden="true" class="header-anchor">#</a> 7. 参考链接</h2> <p><a href="https://www.destroyallsoftware.com/compendium/network-protocols" target="_blank" rel="noopener noreferrer">Network protocols for programmers who know at least one programming language<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新: </span> <span class="time">12/9/2018, 10:53:12 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/network/transport.html" class="prev">
          传输层
        </a></span> <span class="next"><a href="/network/DNS.html">
          DNS 原理入门
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/3.9c25940f.js" defer></script><script src="/assets/js/app.7176b739.js" defer></script>
  </body>
</html>
