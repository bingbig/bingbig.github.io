(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{348:function(s,a,t){"use strict";t.r(a);var n=t(0),r=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"服务器性能剖析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务器性能剖析","aria-hidden":"true"}},[s._v("#")]),s._v(" 服务器性能剖析")]),s._v(" "),t("h2",{attrs:{id:"_3-3-剖析mysql查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-剖析mysql查询","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.3 剖析MySQL查询")]),s._v(" "),t("h3",{attrs:{id:"_3-3-1-剖析服务器负载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-剖析服务器负载","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.3.1 剖析服务器负载")]),s._v(" "),t("p",[s._v("服务器端的剖析很有价值，因为在服务器端可以有效的审计效率低下的查询。")]),s._v(" "),t("h4",{attrs:{id:"捕获mysql的查询到日志文件中"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#捕获mysql的查询到日志文件中","aria-hidden":"true"}},[s._v("#")]),s._v(" 捕获MySQL的查询到日志文件中")]),s._v(" "),t("p",[s._v("在MySQL的当前版本中，慢查询日志是开销最低、精度最高的测量查询时间的工具。在I/O密集的场景下，慢查询日志带来的开销也可以忽略不计。更需要担心的是日志可能消耗大量的磁盘空间。如果长期开启慢查询日志，注意要部署日志轮转工具。")]),s._v(" "),t("p",[s._v("有时候因为某些原因如权限不足等，无法在服务器上记录查询，可以使用"),t("code",[s._v("pt-query-digest")]),s._v("工具，通过"),t("code",[s._v("--processlist")]),s._v("选项不断查看"),t("code",[s._v("SHOW FULL PROCESSLIST")]),s._v("的输出，记录查询等一次出现的时间和消失的时间。也可以通过抓取TCP网络包，根据MySQL客户端和服务端通信协议进行解析。")]),s._v(" "),t("h4",{attrs:{id:"分析查询日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分析查询日志","aria-hidden":"true"}},[s._v("#")]),s._v(" 分析查询日志")]),s._v(" "),t("p",[s._v("从慢查询日志中生成剖析报告建议使用"),t("code",[s._v("pt-query-digest")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"_3-3-2-剖析单条查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-剖析单条查询","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.3.2 剖析单条查询")]),s._v(" "),t("h4",{attrs:{id:"使用show-profile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用show-profile","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用"),t("code",[s._v("SHOW PROFILE")])]),s._v(" "),t("p",[s._v("可以通过服务器变量在会话级别动态修改：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" PROFILING "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" employees"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----+-----------+---------------------+---------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" last_name "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" email               "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" dept_id "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----+-----------+---------------------+---------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Jerry     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" jerry"),t("span",{attrs:{class:"token variable"}},[s._v("@qq.com")]),s._v("        "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),t("span",{attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n\n"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("37")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" new       "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" test"),t("span",{attrs:{class:"token variable"}},[s._v("@test.com")]),s._v("       "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("       "),t("span",{attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----+-----------+---------------------+---------+")]),s._v("\n"),t("span",{attrs:{class:"token number"}},[s._v("21")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" PROFILES"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------+------------+-------------------------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Query_ID "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Duration   "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Query                   "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------+------------+-------------------------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("        "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.00031200")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" employees "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------+------------+-------------------------+")]),s._v("\n"),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("首先可以看到的是以很高的精度显示了查询的响应时间，继续。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" PROFILE "),t("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" QUERY "),t("span",{attrs:{class:"token number"}},[s._v("1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------------------+----------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("Status")]),s._v("               "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Duration "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------------------+----------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("starting")]),s._v("             "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000054")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" checking permissions "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000010")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Opening "),t("span",{attrs:{class:"token keyword"}},[s._v("tables")]),s._v("       "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000019")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" init                 "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000021")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" System "),t("span",{attrs:{class:"token keyword"}},[s._v("lock")]),s._v("          "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000011")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" optimizing           "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000006")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("statistics")]),s._v("           "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000013")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" preparing            "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000014")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" executing            "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000004")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Sending "),t("span",{attrs:{class:"token keyword"}},[s._v("data")]),s._v("         "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000068")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("end")]),s._v("                  "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000007")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" query "),t("span",{attrs:{class:"token keyword"}},[s._v("end")]),s._v("            "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000037")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" closing "),t("span",{attrs:{class:"token keyword"}},[s._v("tables")]),s._v("       "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000010")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" freeing items        "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000024")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" cleaning up          "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000014")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------------------+----------+")]),s._v("\n"),t("span",{attrs:{class:"token number"}},[s._v("15")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("剖析报告给出了查询的每个步骤及其花费的时间。但不幸的是无法通过诸如ORDER BY之类的命令重新排序。继续：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("\nmysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@query_id")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("      STATE"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("      "),t("span",{attrs:{class:"token function"}},[s._v("SUM")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DURATION"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" Total_R"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("          "),t("span",{attrs:{class:"token function"}},[s._v("ROUND")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("              "),t("span",{attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("SUM")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DURATION"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("                  "),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("SUM")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DURATION"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("                  "),t("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" INFORMATION_SCHEMA"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PROFILING \n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("                  "),t("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" QUERY_ID "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@query_id")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("          "),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" Pct_R"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("      "),t("span",{attrs:{class:"token function"}},[s._v("COUNT")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token operator"}},[s._v("*")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" Calls"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("      "),t("span",{attrs:{class:"token function"}},[s._v("SUM")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DURATION"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("COUNT")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token operator"}},[s._v("*")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"R/Call"')]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("      "),t("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" INFORMATION_SCHEMA"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PROFILING \n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("      "),t("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" QUERY_ID "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@query_id")]),s._v(" \n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("      "),t("span",{attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" STATE\n"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("      "),t("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" Total_R "),t("span",{attrs:{class:"token keyword"}},[s._v("DESC")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------------------+----------+-------+-------+--------------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" STATE                "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Total_R  "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Pct_R "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Calls "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" R"),t("span",{attrs:{class:"token operator"}},[s._v("/")]),t("span",{attrs:{class:"token keyword"}},[s._v("Call")]),s._v("       "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------------------+----------+-------+-------+--------------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Sending "),t("span",{attrs:{class:"token keyword"}},[s._v("data")]),s._v("         "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000068")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("21.79")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000680000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("starting")]),s._v("             "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000054")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("17.31")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000540000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" query "),t("span",{attrs:{class:"token keyword"}},[s._v("end")]),s._v("            "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000037")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("11.86")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000370000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" freeing items        "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000024")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("7.69")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000240000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" init                 "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000021")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("6.73")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000210000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Opening "),t("span",{attrs:{class:"token keyword"}},[s._v("tables")]),s._v("       "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000019")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("6.09")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000190000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" preparing            "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000014")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("4.49")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000140000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" cleaning up          "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000014")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("4.49")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000140000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("statistics")]),s._v("           "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000013")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("4.17")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000130000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" System "),t("span",{attrs:{class:"token keyword"}},[s._v("lock")]),s._v("          "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000011")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("3.53")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000110000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" closing "),t("span",{attrs:{class:"token keyword"}},[s._v("tables")]),s._v("       "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000010")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("3.21")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000100000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" checking permissions "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000010")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("3.21")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000100000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("end")]),s._v("                  "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000007")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("2.24")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000070000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" optimizing           "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000006")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("1.92")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000060000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" executing            "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.000004")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{attrs:{class:"token number"}},[s._v("1.28")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0.0000040000")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------------------+----------+-------+-------+--------------+")]),s._v("\n"),t("span",{attrs:{class:"token number"}},[s._v("15")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("warnings")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.02")]),s._v(" sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])]),t("p",[s._v("上面我们没有使用SHOW PROFILE命令而是直接查询INFORMATION_SCHEMA中对用的表，可以按照需求格式化输出。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@query_id")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" STATE"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("SUM")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DURATION"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" Total_R"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("ROUND")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("SUM")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DURATION"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("SUM")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DURATION"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" INFORMATION_SCHEMA"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PROFILING "),t("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" QUERY_ID "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@query_id")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" Pct_R"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("COUNT")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token operator"}},[s._v("*")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" Calls"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{attrs:{class:"token function"}},[s._v("SUM")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DURATION"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("COUNT")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token operator"}},[s._v("*")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"R/Call"')]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" INFORMATION_SCHEMA"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PROFILING "),t("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" QUERY_ID "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@query_id")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" STATE "),t("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" Total_R "),t("span",{attrs:{class:"token keyword"}},[s._v("DESC")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"使用show-status"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用show-status","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用SHOW STATUS")]),s._v(" "),t("p",[s._v("SHOW STATUS命令返回了一些计数器，它是一个有用的工具，但并不是一款剖析工具，可以显示某些活动如读索引的频繁程度，但是无法给出消耗了多少时间。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" FLUSH "),t("span",{attrs:{class:"token keyword"}},[s._v("STATUS")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" employees"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("query results omitted"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{attrs:{class:"token number"}},[s._v("21")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("STATUS")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" Variable_name "),t("span",{attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'Handler%'")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("OR")]),s._v(" Variable_name "),t("span",{attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'Created%'")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------------------------+-------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Variable_name              "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("Value")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------------------------+-------+")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Created_tmp_disk_tables    "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Created_tmp_files          "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Created_tmp_tables         "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_commit             "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_delete             "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_discover           "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_external_lock      "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_mrr_init           "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_prepare            "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_read_first         "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_read_key           "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_read_last          "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_read_next          "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_read_prev          "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_read_rnd           "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_read_rnd_next      "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("22")]),s._v("    "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_rollback           "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_savepoint          "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_savepoint_rollback "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_update             "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Handler_write              "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("+")]),t("span",{attrs:{class:"token comment"}},[s._v("----------------------------+-------+")]),s._v("\n"),t("span",{attrs:{class:"token number"}},[s._v("21")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("p",[s._v("通过"),t("code",[s._v("EXPLAIN")]),s._v("查看查询的执行计划也可以或得大部分相同的信息，但是EXPLAIN是通过估计得到的结果，而通过计数器则是实际的测量结果。例如：EXPLAIN无法告诉你临时表是否是磁盘表，这和内存临时表的性能的差别是很大的。")]),s._v(" "),t("h4",{attrs:{id:"使用慢查询日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用慢查询日志","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用慢查询日志")]),s._v(" "),t("h4",{attrs:{id:"使用performance-schema"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用performance-schema","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用Performance Schema")]),s._v(" "),t("h2",{attrs:{id:"_3-4-诊断间歇性问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-诊断间歇性问题","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.4 诊断间歇性问题")]),s._v(" "),t("h3",{attrs:{id:"_3-4-1-单条查询问题还是服务器问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-1-单条查询问题还是服务器问题","aria-hidden":"true"}},[s._v("#")]),s._v(" 3.4.1 单条查询问题还是服务器问题")]),s._v(" "),t("h4",{attrs:{id:"使用-show-global-status"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-show-global-status","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用 "),t("code",[s._v("SHOW GLOBAL STATUS")])]),s._v(" "),t("p",[s._v("以较高的频率（比如1秒一次）执行"),t("code",[s._v("SHOW GLOBAL STATUS")]),s._v("命令捕获数据，问题出现时，则可以通过某些计数器(比如"),t("code",[s._v("Threads_running")]),s._v(", "),t("code",[s._v("Threads_connected")]),s._v(", "),t("code",[s._v("Questions")]),s._v("和"),t("code",[s._v("Queries")]),s._v(")的“尖刺”或者“凹陷”来发现。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mysqladmin ext -i1 "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'\n/Queries/{q="),t("span",{attrs:{class:"token variable"}},[s._v("$4")]),s._v("-qp;qp="),t("span",{attrs:{class:"token variable"}},[s._v("$4")]),s._v("}\n/Threads_connected/{tc="),t("span",{attrs:{class:"token variable"}},[s._v("$4")]),s._v('}\n/Threads_running/{printf "%5d %5d %5d\\n", q, tc, '),t("span",{attrs:{class:"token variable"}},[s._v("$4")]),s._v("}'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"使用-show-processlist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-show-processlist","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用 "),t("code",[s._v("SHOW PROCESSLIST")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mysql -u root  -p  -e "),t("span",{attrs:{class:"token string"}},[s._v("'SHOW PROCESSLIST\\G'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}],!1,null,null,null);r.options.__file="03.md";a.default=r.exports}}]);