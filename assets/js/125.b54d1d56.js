(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{400:function(t,a,s){"use strict";s.r(a);var n=s(0),r=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("在一个简单的应用中, 你可能已经在你的Makefile中增加了下面这样的CFLAGS和LDFLAGS.")]),t._v(" "),t._m(1),s("p",[t._v("想要构建你的应用却没有libfoobar的人, 或将libfoobar安装到其他位置的人, 将会得到一个处理过的错误消息, 用于帮助他找到错误原因.")]),t._v(" "),s("p",[t._v("在过去十年开发的多数开发源代码软件(OSS)以及PHP都利用了一个实用工具autoconf, 通过一些简单的宏来生成复杂的configure脚本. 这个产生的脚本会执行查找依赖库已经头文件是否安装的工作. 基于这些信息, 一个包可以自定义构建代码行, 或在编译的时间被浪费之前提供一个有意义的错误消息.")]),t._v(" "),s("p",[t._v("在构建php扩展时, 无论你是否计划公开发布, 都需要利用这个autoconf机制. 即便你对autoconf已经很熟悉了, 也请花几分钟时间阅读本章, php中引入了一些一般安装的autoconf没有的自定义宏.")]),t._v(" "),s("p",[t._v("和传统的autoconf步骤(集中的configure.in文件包含了包的所有配置宏)不同, php只是用configure.in管理许多位域源码树下小的config.m4脚本的协调, 包括各个扩展, SAPI, 核心自身, 以及ZendEngine.")]),t._v(" "),s("p",[t._v("你已经在前面的章节看到了一个简单版本的config.m4. 接下来, 我们将在这个文件中增加其他的autoconf语法, 让你的扩展可以收集到更多的配置时信息.")]),t._v(" "),t._m(2),t._v(" "),s("ul",[s("li",[s("router-link",{attrs:{to:"./preface.html"}},[t._v("目录")])],1),t._v(" "),s("li",[t._v("17 "),s("router-link",{attrs:{to:"./17.html"}},[t._v("配置和链接")])],1),t._v(" "),s("li",[t._v("17.2 "),s("router-link",{attrs:{to:"./17.2.html"}},[t._v("库的查找")])],1)])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"autoconf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#autoconf","aria-hidden":"true"}},[this._v("#")]),this._v(" autoconf")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-c line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("CFLAGS "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CFLAGS"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("I"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("foobar"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("include\nLDFLAGS "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("LDFLAGS"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("lfoobar "),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("L"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("foobar"),s("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("lib\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"links"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#links","aria-hidden":"true"}},[this._v("#")]),this._v(" links")])}],!1,null,null,null);r.options.__file="17.1.md";a.default=r.exports}}]);