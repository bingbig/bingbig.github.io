(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{391:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("p",[t._v("切换到你的php源代码树下ext/目录中, 执行下面的命令:")]),t._v(" "),t._m(1),a("p",[t._v("稍等便可, 输出⼀些文本, 你将看到下面的这些输出:")]),t._v(" "),t._m(2),a("p",[t._v('此刻观察ext/sample7目录, 你将看到在第5章"你的第一个扩展"中你编写的扩展骨架 代码的注释版本. 只是现在你还不能编译它; 不过只需要对config.m4做少许修改就可以让 它工作了, 这样你就可以避免第5章中你所做的大部分工作.生成函数原型\n####生成函数原型\n如果你要编写一个对第三方库的包装扩展, 那么你就已经有了⼀个函数原型及基本行 为的机器刻度版本的描述(头文件), 通过传递一个额外的参数给./ext_skel, 它将自动的扫 描你的头文件并创建对应于接口的简单PHP_FUCNTION()块. 下面是使用./ext_skel指令 解析zlib头:')]),t._v(" "),t._m(3),a("p",[t._v('现在在ext/sample8/sample8.c中, 你就可以看到许多PHP_FUNCTION()定义, 每个 zlib函数对应一个. 要注意, 骨架生成程序会对某些未知资源类型产生警告消息. 你需要对 这些函数特别注意, 并且为了将这些内部的复杂结构体和用户空间可访问的变量关联起来, 可能会需要使用你在第9章"资源数据类型"中学到的知识.')]),t._v(" "),t._m(4),t._v(" "),a("ul",[a("li",[a("router-link",{attrs:{to:"./preface.html"}},[t._v("目录")])],1),t._v(" "),a("li",[t._v("18 "),a("router-link",{attrs:{to:"./18.html"}},[t._v("扩展生成")])],1),t._v(" "),a("li",[t._v("18.2 "),a("router-link",{attrs:{to:"./18.2.html"}},[t._v("PECL_Gen")])],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"ext-skel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ext-skel","aria-hidden":"true"}},[this._v("#")]),this._v(" ext_skel")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[t._v("jdoe@devbox"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("jdoe"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("cvs"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("php"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("src"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("ext"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("$ "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("ext_skel extname"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("sample7\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[t._v("To use your new extension"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" you will have to execute the following steps"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1.")]),t._v(" $cd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2.")]),t._v(" $ vi ext"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("sample7"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("m4 "),a("span",{attrs:{class:"token number"}},[t._v("3.")]),t._v(" $ "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("buildconf "),a("span",{attrs:{class:"token number"}},[t._v("4.")]),t._v(" $ "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("configure "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("with"),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("enable"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("sample7 "),a("span",{attrs:{class:"token number"}},[t._v("5.")]),t._v(" $ make "),a("span",{attrs:{class:"token number"}},[t._v("6.")]),t._v(" $ "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("php "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("f ext"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("sample7"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("sample7"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php "),a("span",{attrs:{class:"token number"}},[t._v("7.")]),t._v(" $ vi ext"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("sample7"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("sample7"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c "),a("span",{attrs:{class:"token number"}},[t._v("8.")]),t._v(" $ make Repeat steps "),a("span",{attrs:{class:"token number"}},[t._v("3")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token number"}},[t._v("6")]),t._v(" until you are satisfied with ext"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("sample7"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("m4 and step "),a("span",{attrs:{class:"token number"}},[t._v("6")]),t._v(" confirms that your module is compiled into PHP"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" Then"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" start writing code and repeat the last two steps as often as necessary"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[t._v("￼jdoe@devbox"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("home"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("jdoe"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("cvs"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("php"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("src"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("ext"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("$ "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("ext_skel extname"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("sample8 \\ proto"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("include"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("zlib"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("zlib"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("h\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"links"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#links","aria-hidden":"true"}},[this._v("#")]),this._v(" links")])}],!1,null,null,null);n.options.__file="18.1.md";s.default=n.exports}}]);