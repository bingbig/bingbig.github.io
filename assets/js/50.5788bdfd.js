(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{414:function(s,e,t){"use strict";t.r(e);var _=t(0),v=Object(_.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"centos-ssh-登录等待时间长"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos-ssh-登录等待时间长","aria-hidden":"true"}},[s._v("#")]),s._v(" CentOS ssh 登录等待时间长")]),s._v(" "),t("p",[s._v("最为常见的原因是因为server的"),t("code",[s._v("sshd")]),s._v("会去"),t("code",[s._v("DNS")]),s._v("查找访问client IP的"),t("code",[s._v("hostname")]),s._v("，如果DNS不可用或者没有相关记录，就会耗费大量时间。一般情况下，设备无法连接DNS服务时会出现这种情况。")]),s._v(" "),t("ol",[t("li",[s._v("在server上/etc/hosts文件中把你本机的ip和hostname加入")]),s._v(" "),t("li",[s._v("在server上/etc/ssh/sshd_config文件中修改或加入UseDNS=no")]),s._v(" "),t("li",[s._v("注释掉server上/etc/resolv.conf中所有行")]),s._v(" "),t("li",[s._v("修改server上/etc/nsswitch.conf中hosts为hosts: files  #这一步会导致无法连外网")]),s._v(" "),t("li",[s._v("reboot server使配置生效")])]),s._v(" "),t("p",[s._v("另外在"),t("code",[s._v("authentication gssapi-with-mic")]),s._v(" 也有可能出现问题，在server上"),t("code",[s._v("/etc/ssh/sshd_config")]),s._v("文件中修改"),t("code",[s._v("GSSAPIAuthentication no")]),s._v(" "),t("code",[s._v("/etc/init.d/sshd restart")]),s._v("重启sshd进程使配置生效.")]),s._v(" "),t("p",[s._v("如果以上两招还不能解决问题，善于使用DEBUG MODE  "),t("code",[s._v("ssh -v")]),s._v("来查看log，找到停滞时间最长的步骤，然后针对性的修改配置解决。")])])}],!1,null,null,null);v.options.__file="centos_ssh_login_too_slowly.md";e.default=v.exports}}]);