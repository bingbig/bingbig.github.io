(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{453:function(s,t,a){"use strict";a.r(t);var e=a(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"yum-“segmentation-fault”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yum-“segmentation-fault”","aria-hidden":"true"}},[s._v("#")]),s._v(" yum: “Segmentation fault”")]),s._v(" "),a("p",[s._v("我们的一些机器是很多年前的，系统还是centos5.5，最近想更新一些软件，结果碰到了段错误的问题。")]),s._v(" "),a("p",[s._v("yum使用报错：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("“This system is not registered with RHN.” 和“Segmentation fault”。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("第一个错误通过重装yum相关软件修复。操作如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://vault.centos.org/5.5/os/x86_64/CentOS/yum-3.2.22-26.el5.centos.noarch.rpm\n"),a("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://vault.centos.org/5.5/os/x86_64/CentOS/yum-security-1.1.16-14.el5.centos.1.noarch. rpm\n"),a("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://vault.centos.org/5.5/os/x86_64/CentOS/yum-metadata-parser-1.1.2-3.el5.centos.x86_ 64.rpm\n"),a("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://vault.centos.org/5.5/os/x86_64/CentOS/yum-fastestmirror-1.1.16-14.el5.centos.1.no arch.rpm\n\t\nrpm -qa"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),a("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" yum\n\t\nrpm -qa"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),a("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" yum"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),a("span",{attrs:{class:"token function"}},[s._v("xargs")]),s._v(" rpm -e —nodeps ＃＃uninstall yum\n\t\nrpm -ivh yum-*   ＃＃reinstall\n\t\nyum clean all\n\t\nyum update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("但是又有新的报错：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Error: Cannot retrieve repository metadata "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("repomd.xml"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("for")]),s._v(" repository: addons. Please verify its path and try again\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("解决办法如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rpm -import http://mirrors.163.com/centos/RPM-GPG-KEY-CentOS-5\n"),a("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" /etc/yum.repos.d/ Segmentation fault\n"),a("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://mirrors.163.com/.help/CentOS5-Base-163.repo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("修改文件（把所有 "),a("code",[s._v("$releasever")]),s._v(" 替换成 "),a("code",[s._v("5")]),s._v("，保存）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum -y update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("但是仍然出现段错误\n"),a("code",[s._v("Segmentation fault")])]),s._v(" "),a("p",[s._v("解决办法：\n一般是 "),a("code",[s._v("libz.so.1.2.3")]),s._v(" 的各种链接出现了问题。将其他机器上方的 "),a("code",[s._v("libz.so.1.2.3")]),s._v(" 复制到 "),a("code",[s._v("/lib64")]),s._v("，然后修复各个目录下的链接。")]),s._v(" "),a("p",[a("code",[s._v("/sbin/ldconfig -v|grep libz")]),s._v(" 发现有两个 "),a("code",[s._v("libz-1.2.3")]),s._v(" 和 "),a("code",[s._v("libz.1.2.7")]),s._v("。先将 "),a("code",[s._v("libz.1.2.7")]),s._v(" 重命名成 "),a("code",[s._v("libz.1.2.7.bak")]),s._v(",然后执行 "),a("code",[s._v("yum update")]),s._v("，最后改回来就行。一般 "),a("code",[s._v("yum clean all")]),s._v(" 之后会用到这个库。"),a("code",[s._v("locate")]),s._v(" 可以用找库的位置。")]),s._v(" "),a("p",[s._v("还有一种解决办法就是从别的同类型的机器上把对方的 "),a("code",[s._v("/etc/cache/yum")]),s._v(" 下的文件复制此台机器的相同位置")])])}],!1,null,null,null);n.options.__file="yum_Segmentation_fault.md";t.default=n.exports}}]);