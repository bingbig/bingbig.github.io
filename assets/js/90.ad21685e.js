(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{452:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[s._m(0),s._v(" "),n("p",[s._v("在这一节中，我们正式的定义一个类。首先我给出PHP语言的实现：")]),s._v(" "),s._m(1),s._m(2),s._v(" "),n("p",[s._v("定义类的第一步，便是先定义好这个类的zend_class_entry，这一步操作是在MINIT阶段完成的。")]),s._v(" "),s._m(3),n("p",[s._v("某个类的zend_class_entry会经常用到，所以我们一般会把它保存在一个变量里，供扩展中其它地方的程序使用，所以上述的代码组合一般是这样的：")]),s._v(" "),s._m(4),s._m(5),s._v(" "),s._m(6),s._v(" "),s._m(7),n("p",[s._v("ZEND_ACC_PUBLIC是ZEND_ACC系列掩码中的一个，代表着public，其余的还有ZEND_ACC_PRIVATE,ZEND_ACC_PROTECTED等等，详细描述请见后面的章节。这三个掩码比较简单，就不再叙述了。")]),s._v(" "),s._m(8),s._v(" "),n("p",[s._v("为类定义方法比较繁琐一些，首先我们先回顾一下zend_function_entry结构，在以前我们用它来保存我们扩展的函数，通过它把PHP语言中的函数和我们用C语言编写的函数联系起来，在这它也发挥了这么一个桥梁的作用。下面我们实现myclass类的public_method()和构造方法。")]),s._v(" "),s._m(9),n("p",[s._v("现在我们在PHP脚本中调用一下这个方法，看看输出结果：")]),s._v(" "),s._m(10),n("p",[s._v("这里在定义__construct方法的时候，使用到了ZEND_ACC_CTOR，它的作用便是声明这个方法是此类的构造函数，而ZEND_ACC_PUBLIC|ZEND_ACC_CTOR是我们常见的掩码或运算，代表它是一个public类型构造函数，😃。如果我们去掉ZEND_ACC_CTOR标志，那么此构造函数还会起作用吗？在这里的例子中它仍然起作用，但是在别的环境下我就不敢保证了。\n说到现在，protected和private类型的属性与方法的定义和public的一样。而定义static的属性与方法只是在掩码标志中加入ZEND_ACC_STATIC即可。\n下面详细的罗列出了所有掩码，fn_flags代表可以在定义方法时使用，zend_property_info.flags代表可以在定义属性时使用，ce_flags代表在定义zend_class_entry时候可用。")]),s._v(" "),s._m(11),n("p",[s._v("ZEND_ACC_CTOR与ZEND_ACC_DTOR是比较特殊的掩码标志，分别代表着构造函数与析构函数，不要将这两个标志位用在其它的方法上面。其它的一些魔术方法，如__get,__call等大都需要arginfo，有关它们的内容将在下一章中描述。")]),s._v(" "),s._m(12),s._v(" "),n("p",[s._v("这个内容比较简单，只涉及到一组函数，可以查看Zend/zend_API.h")]),s._v(" "),s._m(13),s._m(14),s._v(" "),n("ul",[n("li",[s._v("10.1 "),n("router-link",{attrs:{to:"./10.1.html"}},[s._v("zend_class_entry")])],1),s._v(" "),n("li",[s._v("10.3 "),n("router-link",{attrs:{to:"./10.3.html"}},[s._v("定义一个接口")])],1)])])},[function(){var s=this.$createElement,t=this._self._c||s;return t("h1",{attrs:{id:"_10-2-php中的面向对象（一）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-php中的面向对象（一）","aria-hidden":"true"}},[this._v("#")]),this._v(" 10.2 PHP中的面向对象（一）")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token php language-php"}},[n("span",{attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("myclass")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token variable"}},[s._v("$public_var")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{attrs:{class:"token variable"}},[s._v("$private_var")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),n("span",{attrs:{class:"token variable"}},[s._v("$protected_var")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{attrs:{class:"token variable"}},[s._v("$static_var")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("__construct")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),n("span",{attrs:{class:"token double-quoted-string string"}},[s._v('"我是__construct方法\\n"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("public_method")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),n("span",{attrs:{class:"token double-quoted-string string"}},[s._v('"我是public类型的方法\\n"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("private_method")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),n("span",{attrs:{class:"token double-quoted-string string"}},[s._v('"我是private类型的方法\\n"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("protected_method")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),n("span",{attrs:{class:"token double-quoted-string string"}},[s._v('"我是protected类型的方法\\n"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("static_var")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),n("span",{attrs:{class:"token double-quoted-string string"}},[s._v('"我是static类型的方法\\n"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"定义类对应的zend-class-entry"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定义类对应的zend-class-entry","aria-hidden":"true"}},[this._v("#")]),this._v(" 定义类对应的zend_class_entry")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("static")]),s._v(" zend_function_entry myclass_method"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token function"}},[s._v("PHP_MINIT_FUNCTION")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tzend_class_entry ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("INIT_CLASS_ENTRY")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"myclass"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("myclass_method"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("zend_register_internal_class")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("&")]),s._v("ce TSRMLS_CC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" SUCCESS"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("//这就是最简单的一个类，没有属性没有方法，但是可以使用了")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("/*\n<?php\n$obj = new myclass();\nvar_dump($obj);\n\n//得到：object(myclass)#1 (0) {}\n\n*/")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[s._v("zend_class_entry "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("myclass_ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[s._v("static")]),s._v(" zend_function_entry myclass_method"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token function"}},[s._v("ZEND_MINIT_FUNCTION")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tzend_class_entry ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("INIT_CLASS_ENTRY")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"myclass"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("myclass_method"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\tmyclass_ce "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_register_internal_class")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("&")]),s._v("ce TSRMLS_CC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" SUCCESS"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"为类定义属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为类定义属性","aria-hidden":"true"}},[this._v("#")]),this._v(" 为类定义属性")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("我们可以用zend_declare_property*系列函数来完成这项操作，为某个类定义属性一般会需要三个信息：\n"),t("ul",[t("li",[this._v("属性的名称")]),this._v(" "),t("li",[this._v("属性的默认值")]),this._v(" "),t("li",[this._v("属性的访问权限等")])]),this._v("\n我们为上面的myclass类定义一个名为“public_var”的属性，默认值为null，访问权限为public。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("ZEND_MINIT_FUNCTION")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tzend_class_entry ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("INIT_CLASS_ENTRY")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"myclass"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("myclass_method"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\tmyclass_ce "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_register_internal_class")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("&")]),s._v("ce TSRMLS_CC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),n("span",{attrs:{class:"token comment"}},[s._v("//定义属性")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("zend_declare_property_null")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myclass_ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"public_var"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("strlen")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"public_var"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ZEND_ACC_PUBLIC TSRMLS_CC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" SUCCESS"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"为类定义方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为类定义方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 为类定义方法")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("//首先，定义这个函数的C语言部分，不过这一次我们使用的是ZEND_METHOD")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("ZEND_METHOD")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" myclass "),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" public_method "),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("php_printf")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"我是public类型的方法\\n"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token function"}},[s._v("ZEND_METHOD")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" myclass "),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" __construct "),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("php_printf")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"我是__construct方法\\n"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("//然后，用PHP_METHOD声明public_method和__construct。")]),s._v("\n\n"),n("span",{attrs:{class:"token function"}},[s._v("PHP_METHOD")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myclass"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" public_method"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("PHP_METHOD")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myclass"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" __construct"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("//再定义一个zend_function_entry")]),s._v("\nzend_function_entry myclass_method"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("ZEND_ME")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myclass"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tpublic_method"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t"),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tZEND_ACC_PUBLIC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("ZEND_ME")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myclass"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t__construct"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t"),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\tZEND_ACC_PUBLIC"),n("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("ZEND_ACC_CTOR"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t"),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t"),n("span",{attrs:{class:"token constant"}},[s._v("NULL")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),n("span",{attrs:{class:"token comment"}},[s._v("//最后，在MINIT阶段register internal class的时候将它作为一个参数传递进去")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("ZEND_MINIT_FUNCTION")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("test"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tzend_class_entry ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\t"),n("span",{attrs:{class:"token comment"}},[s._v("//这里使用了myclass_method这个zend_function_entry")]),s._v("\n\t"),n("span",{attrs:{class:"token function"}},[s._v("INIT_CLASS_ENTRY")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token string"}},[s._v('"myclass"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("myclass_method"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\tmyclass_ce "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_register_internal_class")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("&")]),s._v("ce TSRMLS_CC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" SUCCESS"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token php language-php"}},[n("span",{attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),n("span",{attrs:{class:"token variable"}},[s._v("$obj")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("myclass")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token variable"}},[s._v("$obj")]),n("span",{attrs:{class:"token operator"}},[s._v("-")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),n("span",{attrs:{class:"token function"}},[s._v("public_method")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("/*\nwalu@walu-ThinkPad-Edge:/cnan/program/php-5.3.6/ext/test$ php test.php \n我是__construct方法\n我是public_method方法\n*/")]),s._v("\n\n")])])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_STATIC                     0x01     ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags, zend_property_info.flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_ABSTRACT                   0x02     ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_FINAL                      0x04     ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_IMPLEMENTED_ABSTRACT       0x08     ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_IMPLICIT_ABSTRACT_CLASS    0x10     ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* ce_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_EXPLICIT_ABSTRACT_CLASS    0x20     ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* ce_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_FINAL_CLASS                0x40     ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* ce_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_INTERFACE                  0x80     ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* ce_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_INTERACTIVE                0x10     ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_PUBLIC                     0x100    ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags, zend_property_info.flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_PROTECTED                  0x200    ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags, zend_property_info.flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_PRIVATE                    0x400    ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags, zend_property_info.flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_PPP_MASK\t(ZEND_ACC_PUBLIC | ZEND_ACC_PROTECTED | ZEND_ACC_PRIVATE)")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_CHANGED                    0x800    ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags, zend_property_info.flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_IMPLICIT_PUBLIC            0x1000   ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* zend_property_info.flags; unused (1) */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_CTOR                       0x2000   ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_DTOR                       0x4000   ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_CLONE                      0x8000   ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_ALLOW_STATIC               0x10000  ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_SHADOW                     0x20000  ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_DEPRECATED                 0x40000  ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_CLOSURE                    0x100000 ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n"),n("span",{attrs:{class:"token macro property"}},[s._v("#"),n("span",{attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" ZEND_ACC_CALL_VIA_HANDLER           0x200000 ")]),n("span",{attrs:{class:"token comment"}},[s._v("/* fn_flags */")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"为类定义常量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为类定义常量","aria-hidden":"true"}},[this._v("#")]),this._v(" 为类定义常量")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[s._v("ZEND_API "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_declare_class_constant")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("zend_class_entry "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size_t name_length"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" zval "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("value TSRMLS_DC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nZEND_API "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_declare_class_constant_null")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("zend_class_entry "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size_t name_length TSRMLS_DC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nZEND_API "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_declare_class_constant_long")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("zend_class_entry "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size_t name_length"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("long")]),s._v(" value TSRMLS_DC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nZEND_API "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_declare_class_constant_bool")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("zend_class_entry "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size_t name_length"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" zend_bool value TSRMLS_DC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nZEND_API "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_declare_class_constant_double")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("zend_class_entry "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size_t name_length"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("double")]),s._v(" value TSRMLS_DC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nZEND_API "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_declare_class_constant_stringl")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("zend_class_entry "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size_t name_length"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("value"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size_t value_length TSRMLS_DC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nZEND_API "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("zend_declare_class_constant_string")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("zend_class_entry "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("ce"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" size_t name_length"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("value TSRMLS_DC"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"links"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#links","aria-hidden":"true"}},[this._v("#")]),this._v(" links")])}],!1,null,null,null);e.options.__file="10.2.md";t.default=e.exports}}]);