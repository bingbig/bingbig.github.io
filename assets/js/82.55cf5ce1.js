(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{464:function(s,n,t){"use strict";t.r(n);var a=t(0),e=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"单例模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单例模式","aria-hidden":"true"}},[s._v("#")]),s._v(" 单例模式")]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{attrs:{class:"token php language-php"}},[t("span",{attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n\n"),t("span",{attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" "),t("span",{attrs:{class:"token package"}},[s._v("DesignPatterns"),t("span",{attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Creational"),t("span",{attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Singleton")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("Singleton")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token comment"}},[s._v("/**\n     * @var Singleton\n     */")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("$instance")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{attrs:{class:"token comment"}},[s._v("/**\n     * gets the instance via lazy initialization (created on first usage)\n     */")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("getInstance")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Singleton\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("static")]),t("span",{attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{attrs:{class:"token variable"}},[s._v("$instance")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{attrs:{class:"token keyword"}},[s._v("static")]),t("span",{attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{attrs:{class:"token variable"}},[s._v("$instance")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"token class-name"}},[s._v("static")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),t("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("static")]),t("span",{attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{attrs:{class:"token variable"}},[s._v("$instance")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{attrs:{class:"token comment"}},[s._v("/**\n     * is not allowed to call from outside to prevent from creating multiple instances,\n     * to use the singleton, you have to obtain the instance from Singleton::getInstance() instead\n     */")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("__construct")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{attrs:{class:"token comment"}},[s._v("/**\n     * prevent the instance from being cloned (which would create a second instance of it)\n     */")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("__clone")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{attrs:{class:"token comment"}},[s._v("/**\n     * prevent from being unserialized (which would create a second instance of it)\n     */")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("__wakeup")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br")])])])}],!1,null,null,null);e.options.__file="singleton.md";n.default=e.exports}}]);